"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[392],{392:(e,s,a)=>{a.r(s),a.d(s,{default:()=>c});var t=a(43),i=a(292),l=a(722),r=a(420),n=a(579);const c=()=>{const{name:e}=(0,i.g)(),[s,a]=(0,t.useState)(null),[c,o]=(0,t.useState)([]),[d,h]=(0,t.useState)(""),[m,p]=(0,t.useState)(!1),[v,x]=(0,t.useState)(!1),[j,w]=(0,t.useState)(null),[u,g]=(0,t.useState)(""),[N,b]=(0,t.useState)(null),[f,k]=(0,t.useState)(null),[C,y]=(0,t.useState)(null),[S,A]=(0,t.useState)(!1),[R,I]=(0,t.useState)(!1),[M,L]=(0,t.useState)(!1),[P,z]=(0,t.useState)("spam"),[B,F]=(0,t.useState)([]),[_,T]=(0,t.useState)(1);(0,t.useEffect)((()=>{(()=>{const e=localStorage.getItem("authToken");if(e)try{const s=(0,r.s)(e);1e3*s.exp>Date.now()?y(s.sub):(localStorage.removeItem("authToken"),y(null))}catch(s){console.error("\ud1a0\ud070 \ub514\ucf54\ub529 \uc2e4\ud328:",s),y(null)}})()}),[]),(0,t.useEffect)((()=>{(async()=>{try{const s=await l.A.get("http://localhost:18080/api/restaurants/".concat(e));a(s.data);const t=await l.A.get("http://localhost:18080/api/reviews/".concat(e));F(t.data);const i=await l.A.get("http://localhost:18080/api/users");if(o(i.data),C){const s=await l.A.get("http://localhost:18080/api/likes-and-favorites/".concat(C)),{likes:a=[],favorites:t=[]}=s.data;p(a.includes(e)),x(t.includes(e))}}catch(s){h(s.message)}})()}),[e,C]);const D=async e=>{try{await l.A.delete("http://localhost:18080/api/reviews/".concat(e)),F((s=>s.filter((s=>s.reviewNumber!==e)))),alert("\ub9ac\ubdf0\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(s){console.error("\ub9ac\ubdf0 \uc0ad\uc81c \uc911 \uc624\ub958:",s),alert("\ub9ac\ubdf0 \uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}},X=()=>{I(!0)},E=e=>{z(e.target.value)},U=()=>{L(!0)},W=()=>{L(!1)},q=3*(_-1),G=B.slice(q,q+3);return d?(0,n.jsxs)("div",{children:["\uc624\ub958: ",d]}):s?(0,n.jsxs)("div",{className:"restaurant-detail",children:[(0,n.jsxs)("div",{className:"top-section",children:[(0,n.jsx)("div",{className:"image-box",children:(0,n.jsx)("img",{src:"default.jpg"===s.menuName?"/images/default.jpg":"/images/menu/".concat(s.menuName),alt:s.name})}),(0,n.jsx)("div",{className:"map-box",style:{height:"320px",overflow:"hidden",position:"relative"},children:(0,n.jsx)("iframe",{src:"https://map.naver.com/v5/search/".concat(encodeURIComponent(s.address)),width:"230%",height:"100%",style:{border:"none",position:"absolute",top:0,left:"-130%"},allowFullScreen:!0,title:"Naver Map"})})]}),(0,n.jsxs)("div",{className:"title-and-actions",children:[(0,n.jsxs)("h2",{children:[s.name," ",(0,n.jsx)("span",{className:"rating",children:B.length>0&&B.reduce(((e,s)=>e+s.reviewScore),0)>0?(B.reduce(((e,s)=>e+s.reviewScore),0)/B.length).toFixed(1):s.scoreNumber})]}),(0,n.jsxs)("div",{className:"actions",children:[(0,n.jsxs)("span",{onClick:async()=>{if(C)try{const s=await l.A.post("http://localhost:18080/api/favorites/toggle",{memId:C,resName:e});x(s.data)}catch(s){console.error("\uc990\uaca8\ucc3e\uae30 \ud1a0\uae00 \uc911 \uc624\ub958:",s)}else console.warn("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.")},style:{cursor:"pointer",marginRight:"10px"},children:[v?(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"gold",children:(0,n.jsx)("path",{d:"M12 .587l3.668 7.431 8.332 1.151-6.064 5.884 1.457 8.272-7.393-3.884-7.393 3.884 1.457-8.272-6.064-5.884 8.332-1.151z"})}):(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"gray",children:(0,n.jsx)("path",{d:"M12 .587l3.668 7.431 8.332 1.151-6.064 5.884 1.457 8.272-7.393-3.884-7.393 3.884 1.457-8.272-6.064-5.884 8.332-1.151z"})}),"\uc990\uaca8\ucc3e\uae30"]}),(0,n.jsxs)("span",{onClick:async()=>{if(C)try{const s=(await l.A.post("http://localhost:18080/api/likes/toggle",{memId:C,resName:e})).data;p(s);const t=await l.A.get("http://localhost:18080/api/restaurants/".concat(e));a(t.data)}catch(s){console.error("\uc88b\uc544\uc694 \ud1a0\uae00 \uc911 \uc624\ub958:",s)}else console.warn("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.")},style:{cursor:"pointer",marginRight:"10px"},children:[m?(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"red",children:(0,n.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}):(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"gray",children:(0,n.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),"\uc88b\uc544\uc694 ",s.likeCount||0]}),(0,n.jsxs)("span",{children:["\ud83d\udc40 \uc870\ud68c\uc218 ",s.viewCount||0]})]})]}),(0,n.jsxs)("div",{className:"main-section",children:[(0,n.jsxs)("div",{className:"details",children:[(0,n.jsxs)("p",{children:["\uc601\uc5c5\uc2dc\uac04: ",s.openTime||"\uc815\ubcf4 \uc5c6\uc74c"]}),(0,n.jsxs)("p",{children:["\ud734\uac8c\uc2dc\uac04: ",s.breakTime||"\uc815\ubcf4 \uc5c6\uc74c"]}),(0,n.jsxs)("p",{children:["\ud734\ubb34\uc77c: ",s.offDays||"\uc815\ubcf4 \uc5c6\uc74c"]}),(0,n.jsxs)("p",{children:["\uc8fc\uc18c: ",s.address||"\uc815\ubcf4 \uc5c6\uc74c"," (\uc9c0\ubc88: ",s.oldAddress||"\uc815\ubcf4 \uc5c6\uc74c",")"]}),(0,n.jsxs)("p",{children:["\uc804\ud654\ubc88\ud638: ",s.phoneNumber||"\uc815\ubcf4 \uc5c6\uc74c"]}),s.homepage&&"\ud648\ud398\uc774\uc9c0 \uc815\ubcf4 \uc5c6\uc74c"!==s.homepage?(0,n.jsxs)("p",{children:["\ud648\ud398\uc774\uc9c0:"," ",(0,n.jsx)("a",{href:s.homepage.startsWith("http")?s.homepage:"https://".concat(s.homepage),target:"_blank",rel:"noopener noreferrer",children:s.homepage})]}):(0,n.jsx)("p",{children:"\ud648\ud398\uc774\uc9c0: \uc815\ubcf4 \uc5c6\uc74c"}),(0,n.jsxs)("p",{children:["\uc8fc\ucc28: ",s.parkingInfo||"\uc815\ubcf4 \uc5c6\uc74c"]}),(0,n.jsxs)("p",{children:["\uad00\ub828 \ud0dc\uadf8: ",s.tags||"\uc815\ubcf4 \uc5c6\uc74c"]})]}),(0,n.jsxs)("div",{className:"reviews-section",children:[(0,n.jsxs)("div",{className:"reviews-header",children:[(0,n.jsxs)("h3",{children:["\ub9ac\ubdf0 (",B.length,")"]}),(0,n.jsx)("button",{className:"review-button",onClick:U,children:"\ub9ac\ubdf0 \uc791\uc131 \u2228"})]}),(0,n.jsx)("div",{className:"review-list",children:B.sort(((e,s)=>s.reviewNumber-e.reviewNumber)).slice(0,2).map(((e,s)=>{const a=c.find((s=>s.mem_id===e.memberId));return(0,n.jsxs)("div",{className:"review-item",children:[(0,n.jsxs)("p",{children:[a?a.mem_nickname:"\uc54c \uc218 \uc5c6\uc74c"," ",(0,n.jsx)("span",{className:"rating",children:e.reviewScore.toFixed(1)})]}),(0,n.jsx)("div",{className:"review-content",children:e.reviewContent}),e.reviewPhotoName&&(0,n.jsx)("div",{className:"review-image",children:(0,n.jsx)("img",{src:"/images/reviews/".concat(e.reviewPhotoName||"default.jpg"),alt:"\ub9ac\ubdf0 \uc774\ubbf8\uc9c0"})}),(0,n.jsxs)("div",{className:"review-actions",children:["\u2764\ufe0f \uc88b\uc544\uc694 ",e.reviewLikes||0]})]},s)}))}),(0,n.jsx)("button",{className:"more-reviews",onClick:()=>{A(!0)},children:"\ub9ac\ubdf0 \ub354\ubcf4\uae30 +"})]})]}),S&&(0,n.jsx)("div",{className:"modal-overlay",children:(0,n.jsxs)("div",{className:"modal-content",children:[(0,n.jsxs)("div",{className:"modal-header",children:[(0,n.jsxs)("h2",{children:["\ub9ac\ubdf0 \ubaa9\ub85d (",B.length,")"]}),(0,n.jsx)("button",{className:"write-review-btn",onClick:U,children:"\ub9ac\ubdf0 \uc791\uc131 \u2228"}),(0,n.jsx)("button",{className:"close-modal",onClick:()=>{A(!1)},children:"X"})]}),(0,n.jsx)("div",{className:"modal-body",children:B.length>0?(0,n.jsxs)("div",{className:"review-container",children:[(0,n.jsx)("div",{className:"review-list",children:G.map(((e,s)=>{const a=c.find((s=>s.mem_id===e.memberId));return(0,n.jsxs)("div",{className:"review-item",children:[(0,n.jsxs)("div",{className:"review-header",children:[(0,n.jsxs)("div",{className:"review-info",children:[(0,n.jsx)("strong",{children:a?a.mem_nickname:"\uc54c \uc218 \uc5c6\uc74c"})," ",(0,n.jsx)("span",{className:"rating",children:parseFloat(e.reviewScore).toFixed(1)}),(0,n.jsx)("span",{className:"report",onClick:X,children:"\ud83d\udea8 \uc2e0\uace0"})]}),(0,n.jsxs)("div",{className:"review-actions",children:[(0,n.jsx)("button",{className:"edit-btn",children:"\uc218\uc815"}),(0,n.jsx)("button",{className:"delete-btn",onClick:()=>{return s=e.reviewNumber,void(window.confirm("\uc815\ub9d0\ub85c \uc774 \ub9ac\ubdf0\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&D(s));var s},children:"\uc0ad\uc81c"})]})]}),(0,n.jsx)("div",{className:"review-content",children:e.reviewContent}),(0,n.jsxs)("div",{className:"review-container",children:[e.reviewPhotoName&&(0,n.jsx)("div",{className:"review-image",children:(0,n.jsx)("a",{href:"/images/reviews/".concat(e.reviewPhotoName||"default.jpg"),target:"_blank",rel:"noopener noreferrer",children:(0,n.jsx)("img",{src:"/images/reviews/".concat(e.reviewPhotoName||"default.jpg"),alt:"\ub9ac\ubdf0 \uc774\ubbf8\uc9c0"})})}),(0,n.jsx)("div",{className:"review-footer",children:(0,n.jsxs)("span",{className:"like",style:{cursor:"pointer"},children:[e.isLiked?(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"red",children:(0,n.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}):(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"gray",children:(0,n.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),"\uc88b\uc544\uc694 ",e.reviewLikes||0]})})]})]},s)}))}),(0,n.jsxs)("div",{className:"pagination-controls",children:[(0,n.jsx)("button",{onClick:()=>{_>1&&T((e=>e-1))},disabled:1===_,children:"\u2227"}),(0,n.jsx)("button",{onClick:()=>{_<Math.ceil(B.length/3)&&T((e=>e+1))},disabled:_===Math.ceil(B.length/3),children:"\u2228"})]})]}):(0,n.jsx)("p",{children:"\ub9ac\ubdf0\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."})})]})}),R&&(0,n.jsx)("div",{className:"report-modal-overlay",children:(0,n.jsxs)("div",{className:"report-modal-content",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{className:"report-modal-header",children:[(0,n.jsx)("h2",{children:"\uc2e0\uace0\ud558\uae30"}),(0,n.jsx)("button",{className:"close-report-modal",onClick:()=>{I(!1)},children:"X"})]}),(0,n.jsxs)("div",{className:"report-modal-body",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"\uc791\uc131\uc790"})," | \ub2c9\ub124\uc7841"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"\uc81c\ubaa9"})," | \uc81c\ubaa9"]}),(0,n.jsxs)("div",{className:"report-options",children:[(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"radio",name:"reportReason",value:"spam",checked:"spam"===P,onChange:E}),"\uc2a4\ud338\ud64d\ubcf4/\ub3c4\ubc30\uc785\ub2c8\ub2e4."]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"radio",name:"reportReason",value:"obscene",checked:"obscene"===P,onChange:E}),"\uc74c\ub780\ubb3c\uc785\ub2c8\ub2e4."]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"radio",name:"reportReason",value:"illegal",checked:"illegal"===P,onChange:E}),"\ubd88\ubc95\uc815\ubcf4\ub97c \ud3ec\ud568\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4."]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"radio",name:"reportReason",value:"harmful",checked:"harmful"===P,onChange:E}),"\uccad\uc18c\ub144\uc5d0\uac8c \uc720\ud574\ud55c \ub0b4\uc6a9\uc785\ub2c8\ub2e4."]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"radio",name:"reportReason",value:"offensive",checked:"offensive"===P,onChange:E}),"\uc695\uc124/\uc0dd\uba85\uacbd\uc2dc/\ud610\uc624/\ucc28\ubcc4\uc801 \ud45c\ud604\uc785\ub2c8\ub2e4."]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"radio",name:"reportReason",value:"privacy",checked:"privacy"===P,onChange:E}),"\uac1c\uc778\uc815\ubcf4\uac00 \ub178\ucd9c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"radio",name:"reportReason",value:"custom",checked:"custom"===P,onChange:E}),"\uc9c1\uc811 \uc785\ub825\ud558\uae30."]})]}),(0,n.jsx)("textarea",{className:"report-custom-input",placeholder:"\uc0ac\uc720\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694",disabled:"custom"!==P})]}),(0,n.jsx)("div",{className:"report-modal-footer",children:(0,n.jsx)("button",{className:"submit-btn",children:"\uc2e0\uace0\ud558\uae30"})})]})}),M&&(0,n.jsx)("div",{className:"modal-overlay",children:(0,n.jsxs)("div",{className:"review-write-modal-content",children:[(0,n.jsxs)("div",{className:"review-write-modal-header",children:[(0,n.jsx)("h2",{children:"\ub9ac\ubdf0 \uc791\uc131"}),(0,n.jsx)("button",{className:"close-review-write-modal",onClick:W,children:"X"})]}),(0,n.jsxs)("div",{className:"review-write-modal-body",children:[(0,n.jsxs)("div",{className:"review-write-actions",children:[(0,n.jsxs)("select",{className:"review-write-rating-select",value:j,onChange:e=>w(Number(e.target.value)),children:[(0,n.jsx)("option",{value:"",children:"\ubcc4\uc810 \uc120\ud0dd"}),[1,1.5,2,2.5,3,3.5,4,4.5,5].map((e=>(0,n.jsx)("option",{value:e,children:e},e)))]}),(0,n.jsxs)("label",{className:"review-write-image-upload-label",children:["\uc774\ubbf8\uc9c0 \ucca8\ubd80",(0,n.jsx)("input",{type:"file",accept:"image/*",className:"review-write-image-upload-input",onChange:e=>{const s=e.target.files[0];s?(b(s),k(s.name)):(b(null),k(null))},style:{display:"none"}})]}),f&&(0,n.jsxs)("p",{className:"selected-image-name",children:["\uc120\ud0dd\ub41c \ud30c\uc77c: ",f]})]}),(0,n.jsx)("textarea",{placeholder:"\ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694",className:"review-write-content-input",value:u,onChange:e=>g(e.target.value)}),(0,n.jsxs)("div",{className:"review-write-modal-footer",children:[(0,n.jsx)("button",{className:"cancel-btn",onClick:W,children:"\ucde8\uc18c"}),(0,n.jsx)("button",{className:"submit-btn",onClick:async()=>{if(!j)return void alert("\ubcc4\uc810\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694!");if(!u.trim())return void alert("\ub9ac\ubdf0 \ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694!");const s=new FormData;s.append("reviewScore",j),s.append("reviewContent",u),s.append("memberId",C),N&&s.append("reviewPhoto",N);try{await l.A.post("http://localhost:18080/api/reviews/".concat(e),s,{headers:{"Content-Type":"multipart/form-data"}}),alert("\ub9ac\ubdf0\uac00 \uc131\uacf5\uc801\uc73c\ub85c \ub4f1\ub85d\ub418\uc5c8\uc2b5\ub2c8\ub2e4!");const a=await l.A.get("http://localhost:18080/api/reviews/".concat(e));F(a.data);const t=await l.A.get("http://localhost:18080/api/reviews/".concat(e));F(t.data),W(),w(null),g(""),b(null)}catch(a){console.error("\ub9ac\ubdf0 \ub4f1\ub85d \uc911 \uc624\ub958:",a),alert("\ub9ac\ubdf0 \ub4f1\ub85d\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}},children:"\ub4f1\ub85d"})]})]})]})})]}):(0,n.jsx)("div",{children:"\ub85c\ub529 \uc911..."})}}}]);
//# sourceMappingURL=392.eaff7a13.chunk.js.map