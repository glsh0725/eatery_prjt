"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[685],{685:(e,a,s)=>{s.r(a),s.d(a,{default:()=>m});var n=s(555),r=s(43),i=s(420),t=s(779),o=s(64),c=s.n(o),l=s(579);const m=()=>{const[e,a]=(0,r.useState)({currentPassword:"",newPassword:"",confirmNewPassword:"",email:"",emailAgree:"",nickname:""});(0,r.useEffect)((()=>{const e=localStorage.getItem("token");if(e)try{const s=(0,i.s)(e);a((e=>(0,n.A)((0,n.A)({},e),{},{email:s.email||"",emailAgree:"y"===s.email_status?"y":"n",nickname:s.mem_nickname||""})))}catch(s){console.error("Invalid token:",s),c().fire("\uc624\ub958","\uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \ud1a0\ud070\uc785\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694.","error"),localStorage.removeItem("token"),window.location.href="/login"}}),[]);const s=s=>{const{name:r,value:i}=s.target;a((0,n.A)((0,n.A)({},e),{},{[r]:i}))};return(0,l.jsx)(t.A,{children:(0,l.jsx)("div",{className:"userinfo_form",children:(0,l.jsxs)("form",{onSubmit:async a=>{if(a.preventDefault(),e.newPassword===e.confirmNewPassword)try{const a=await fetch("/api/userupdate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await a.json();s.success?await c().fire("\uc131\uacf5","\ud68c\uc6d0\uc815\ubcf4\uac00 \uc131\uacf5\uc801\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","success"):await c().fire("\uc624\ub958",s.message||"\uc5c5\ub370\uc774\ud2b8\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.","error")}catch(s){await c().fire("\uc624\ub958","\uc11c\ubc84\uc640\uc758 \ud1b5\uc2e0\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.","error")}else await c().fire("\uc624\ub958","\ubcc0\uacbd\ud560 \ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.","error")},children:[(0,l.jsx)("p",{className:"form_title",children:"\ud68c\uc6d0\uc815\ubcf4 \uc218\uc815"}),(0,l.jsx)("div",{className:"form_item",children:(0,l.jsx)("input",{type:"text",name:"nickname",className:"input_userinfo",placeholder:"\ub2c9\ub124\uc784",value:e.nickname,onChange:s,required:!0})}),(0,l.jsx)("div",{className:"form_item",children:(0,l.jsx)("input",{type:"password",name:"currentPassword",className:"input_userinfo",placeholder:"\ud604\uc7ac \ube44\ubc00\ubc88\ud638",value:e.currentPassword,onChange:s,required:!0})}),(0,l.jsx)("div",{className:"form_item",children:(0,l.jsx)("input",{type:"password",name:"newPassword",className:"input_userinfo",placeholder:"\ubcc0\uacbd\ud560 \ube44\ubc00\ubc88\ud638",value:e.newPassword,onChange:s})}),(0,l.jsx)("div",{className:"form_item",children:(0,l.jsx)("input",{type:"password",name:"confirmNewPassword",className:"input_userinfo",placeholder:"\ubcc0\uacbd\ud560 \ube44\ubc00\ubc88\ud638 \ud655\uc778",value:e.confirmNewPassword,onChange:s})}),(0,l.jsx)("div",{className:"form_item",children:(0,l.jsx)("input",{type:"email",name:"email",className:"input_userinfo",placeholder:"\uc774\uba54\uc77c",value:e.email,onChange:s,required:!0})}),(0,l.jsxs)("div",{className:"form_item radio_agree",children:[(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"radio",name:"emailAgree",value:"y",checked:"y"===e.emailAgree,onChange:s}),"\uc774\uba54\uc77c \uc218\uc2e0 \ub3d9\uc758"]}),(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"radio",name:"emailAgree",value:"n",checked:"n"===e.emailAgree,onChange:s}),"\uc774\uba54\uc77c \uc218\uc2e0 \uac70\ubd80"]})]}),(0,l.jsx)("div",{className:"form_item delete_account",onClick:()=>{c().fire({title:"\uc815\ub9d0 \ud0c8\ud1f4\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",text:"\ud0c8\ud1f4 \uc2dc \uacc4\uc815\uc774 \uc0ad\uc81c\ub429\ub2c8\ub2e4.",icon:"warning",showCancelButton:!0,confirmButtonText:"\ud655\uc778",cancelButtonText:"\ucde8\uc18c"}).then((async e=>{if(e.isConfirmed)try{const e=await fetch("/api/userdelete",{method:"DELETE",headers:{"Content-Type":"application/json"}}),a=await e.json();a.success?(await c().fire("\ud0c8\ud1f4 \uc644\ub8cc","\uacc4\uc815\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","success"),localStorage.removeItem("token"),window.location.href="/login"):await c().fire("\uc624\ub958",a.message||"\ud0c8\ud1f4\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.","error")}catch(a){await c().fire("\uc624\ub958","\uc11c\ubc84\uc640\uc758 \ud1b5\uc2e0\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.","error")}}))},children:"\ud68c\uc6d0\ud0c8\ud1f4"}),(0,l.jsx)("div",{className:"form_item",children:(0,l.jsx)("button",{type:"submit",className:"btn_save_button",children:"\uc800\uc7a5"})})]})})})}}}]);
//# sourceMappingURL=685.bb13772c.chunk.js.map